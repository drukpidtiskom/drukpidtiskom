<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Друк Під Тиском</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <style>
    section {
      scroll-margin-top: -3vh;
    }
    html {
      scroll-behavior: smooth;
    }
  </style> 
</head>
<body>
  <!-- Модальне вікно -->
  <div class="modal" id="orderModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">×</span>
      <form id="orderForm" enctype="multipart/form-data">
        <h3>Залишити заявку</h3>
        <input type="email" name="contact_mail" placeholder="Email" required>
        <input type="tel" name="contact_phone" placeholder="+380..." pattern="\+380\d{9}" required title="Номер повинен бути у форматі +380...">
        <textarea name="message" placeholder="Опишіть ваше замовлення..." required></textarea>
        
        <div class="file-upload-container">
          <label for="attachments" class="file-upload-label">
            <span>Прикріпити файли (макс. 5 файлів, кожен до 25MB)</span>
            <input type="file" id="attachments" name="attachments" multiple accept="image/*,.pdf,.doc,.docx,.ai,.eps,.psd,.cdr" style="display: none;">
          </label>
          <div id="fileList" class="file-list"></div>
          <div id="fileError" class="file-error" style="display: none;"></div>
        </div>
        
        <button type="submit" class="submit-btn" id="submitBtn">
          <span class="btn-text">ВІДПРАВИТИ</span>
          <div class="spinner" id="spinner" style="display: none;"></div>
        </button>
      </form>
    </div>
  </div>
<div class="background-overlay"></div>
  <div class="wrapper">
    <div class="content">
      <div class="header">
        <div class="logo">
          <img src="./my-logo.svg" alt="Логотип" />
        </div>
        <nav class="nav">
          <a class="nav-item" href="#services">ПОСЛУГИ</a>
          <a class="nav-item" href="#projects">ПРОЕКТИ</a>
          <a class="nav-item" href="#about">КОМПАНІЯ</a>
          <a class="nav-item" href="#contacts">КОНТАКТИ</a>
        </nav>
      </div>
      <div class="main-illustration"></div>
      <a href="#price" class="order-btn price-btn">ПРАЙС</a>
    </div>

    <!-- FULL services section restored -->
    <section class="services" id="services">
      <h2 class="services-title">~ ПОСЛУГИ ~</h2>
      <div class="services-columns">
        <!-- Друк -->
        <div class="service-column">
          <img src="./print-man.svg" alt="Друк на одязі" class="service-image" />
          <h3>ДРУК НА ОДЯЗІ</h3>
          <div class="service-subtitle">~ ШОВКОДРУК ~</div>
          <ul>
            <li>ШВИДКИЙ ДРУК</li>
            <li>ВЕЛИКІ ТИРАЖІ</li>
            <li>ВИГІДНИЙ ПРАЙС</li>
            <li>ДРУК НА ОДЯЗІ</li>
            <li>ДРУК НА ПАПЕРІ</li>
            <li>ДРУК НА СКЛІ</li>
            <li>ДРУК НА ПЛАСТИКУ</li>
          </ul>
          <div class="service-subtitle">~ ЦИФРОДРУК ~</div>
          <ul>
            <li>ДЕТАЛІЗАЦІЯ ПРИНТУ</li>
            <li>СЕРЕДНІ ТИРАЖІ</li>
            <li>ДРУК НА ОДЯЗІ</li>
          </ul>
          <div class="service-subtitle">~ DTF ~</div>
          <ul>
            <li>ДЕТАЛІЗАЦІЯ ПРИНТУ</li>
            <li>СЕРЕДНІ ТИРАЖІ</li>
            <li>ЗРУЧНИЙ</li>
          </ul>
        </div>
        <!-- Пошиття -->
        <div class="service-column">
          <img src="./woman.svg" alt="Пошиття одягу" class="service-image" />
          <h3>ПОШИТТЯ ОДЯГУ</h3>
          <div class="service-subtitle">~ ФУТБОЛКИ ~</div>
          <ul>
            <li>ВІД 10 ДО 1000</li>
            <li>ЯКІСНІ МАТЕРІАЛИ</li>
            <li>ВИГІДНИЙ ПРАЙС</li>
            <li>ЗРОБЛЕНІ ПІД ДРУК</li>
            <li>РІЗНІ ФАСОНИ</li>
            <li>БАГАТО КОЛЬОРІВ</li>
          </ul>
          <div class="service-subtitle">~ ХУДІ ~</div>
          <ul>
            <li>ВІД 10 ДО 1000</li>
            <li>ЯКІСНІ МАТЕРІАЛИ</li>
            <li>ВИГІДНИЙ ПРАЙС</li>
            <li>ЗРОБЛЕНІ ПІД ДРУК</li>
            <li>РІЗНІ ФАСОНИ</li>
            <li>БАГАТО КОЛЬОРІВ</li>
          </ul>
          <div class="service-subtitle">~ ІНШИЙ ОДЯГ ~</div>
        </div>
        <!-- Проєктування -->
        <div class="service-column">
          <img src="./man.svg" alt="Кейс-проєктування" class="service-image" />
          <h3>КЕЙС-ПРОЄКТУВАННЯ</h3>
          <div class="service-subtitle">~ РОЗРОБКА ~</div>
          <ul>
            <li>РОЗРОБКА ЛЕКАЛ</li>
            <li>РОЗРОБКА ПРИНТУ</li>
            <li>РОЗРОБКА БІРКИ</li>
            <li>РОЗРОБКА ЛОГО</li>
            <li>ПІДБІР МАТЕРІАЛІВ</li>
          </ul>
          <div class="service-subtitle">~ ДИЗАЙН ~</div>
          <ul>
            <li>ДИЗАЙН СТІКЕРІВ</li>
            <li>ВІЗУАЛІЗАЦІЯ ОДЯГУ</li>
            <li>ХУДОЖНІ РОБОТИ</li>
          </ul>
          <div class="service-subtitle">~ ПІД КЛЮЧ ~</div>
          <ul>
            <li>ВИГОТОВЛЕННЯ ОДЯГУ</li>
            <li>СУПРОВІД БРЕНДУ</li>
            <li>ПОВНИЙ ЦИКЛ З НУЛЮ</li>
          </ul>
        </div>
      </div>
      <div class="order-btn">ЗАМОВИТИ</div>
    </section>

    <!-- ПРОЕКТИ -->
    <section class="projects-carousel" id="projects">
  <h2 class="carousel-title">~ ПРОЕКТИ ~</h2>
  <div class="carousel-outer">
    <button class="carousel-button left" onclick="moveSlide(-1)">
      <img src="./arrow-left.svg" alt="←">
    </button>

    <div class="carousel-container">
      <div class="carousel-slide-wrapper">
        <div class="carousel-slide" id="carousel">
          <img src="./Project1.png" alt="Project 1">
          <img src="./Project2.png" alt="Project 2">
          <img src="./Project3.png" alt="Project 3">
          <img src="./Project4.png" alt="Project 4">
          <img src="./Project5.png" alt="Project 5">
          <img src="./Project6.png" alt="Project 6">
          <img src="./Project7.png" alt="Project 7">
          <img src="./Project8.png" alt="Project 8">
          <img src="./Project9.png" alt="Project 9">
          <img src="./Project10.png" alt="Project 10">
          <img src="./Project11.png" alt="Project 11">
          <img src="./Project12.png" alt="Project 12">
          <img src="./Project13.png" alt="Project 13">
          <img src="./Project14.png" alt="Project 14">
          <img src="./Project15.png" alt="Project 15">
          <img src="./Project16.png" alt="Project 16">
          <img src="./Project17.png" alt="Project 17">
          <img src="./Project18.png" alt="Project 18">
          <img src="./Project19.png" alt="Project 19">
        </div>
      </div>
    </div>

    <button class="carousel-button right" onclick="moveSlide(1)">
      <img src="./arrow-right.svg" alt="→">
    </button>
  </div>

  <div class="carousel-caption" id="carousel-caption"></div>

  <div class="order-btn">ЗАМОВИТИ</div>
</section>

<!-- ПРАЙС -->
<section class="price-section" id="price">
  <h2 class="price-title">~ ПРАЙС ~</h2>

  <div class="price-grid">
    <!-- ШОВКОДРУК -->
    <article class="price-card">
      <h3>ШОВКОДРУК</h3>
      <p class="price-text">
        Вартість розраховується індивідуально та залежить від:
      </p>
      <ul class="price-list">
        <li>Розміру друку</li>
        <li>Кількості кольорів</li>
        <li>Тиражу (кількості одиниць)</li>
        <li>Складності завдання</li>
      </ul>
      <p class="price-note">
        Щоб отримати прорахунок, натисніть кнопку <strong>«Замовити»</strong> та прикріпіть файл із макетом.
      </p>
    </article>

    <!-- ПОШИТТЯ -->
    <article class="price-card">
      <h3>ПОШИТТЯ</h3>
      <div class="price-block">
        <h4>Футболка без принту:</h4>
        <ul class="price-list">
          <li><strong>СТАНДАРТ</strong> — від 350 грн</li>
          <li><strong>ПРЕМІУМ</strong> — від 450 грн</li>
          <li><strong>HEAVY COTTON</strong> — від 500 грн</li>
        </ul>
      </div>
      <div class="price-block">
        <h4>Худі без принту:</h4>
        <ul class="price-list">
          <li><strong>СТАНДАРТ</strong> — від 700 грн</li>
          <li><strong>ПРЕМІУМ</strong> — від 1000 грн</li>
          <li><strong>HEAVY COTTON</strong> — від 1250 грн</li>
        </ul>
      </div>
    </article>

    <!-- ІНШЕ -->
    <article class="price-card">
      <h3>ІНШЕ</h3>
      <p class="price-text">
        Ми спеціалізуємося на створенні одягу та друку під замовлення. Можемо нанести принт на ваші готові речі або
        виготовити виріб з нуля за власними лекалами.
      </p>
      <p class="price-text">Пропонуємо <strong>комплексні кейси</strong> з повним виробничим циклом:</p>
      <ul class="price-list">
        <li>Розробка та підготовка макету;</li>
        <li>Підбір тканин і матеріалів;</li>
        <li>Пошиття виробу;</li>
        <li>Друк і фінішна обробка.</li>
      </ul>
    </article>
  </div>

  <div class="order-btn">ЗАМОВИТИ</div>
</section>

    <!-- КОМПАНІЯ -->
    <section class="company-section" id="about">
      <h2>~ КОМПАНІЯ ~</h2>
      <img src="./kharkiv.png" alt="Фото компанії">
      <p>
        Ми — Друк Під Тиском<br>
        Друзі, які не зупинились навіть під сирени.<br>
        Зібрались разом, щоб друкувати справжнє.<br>
        Під тиском з характером.
      </p>
    </section>

    <!-- КОНТАКТИ -->
    <section class="contacts-section" id="contacts">
      <h2>~ КОНТАКТИ ~</h2>
      <p>м. Харків</p>
      <div class="contact-icons">
        <a href="https://t.me/yourlink" target="_blank">
          <img src="./telegram.svg" alt="Telegram">
        </a>
        <a href="#" id="viber-btn">
          <img src="./viber.svg" alt="Viber">
        </a>
        <a href="https://www.instagram.com/drukpidtyskom" target="_blank">
          <img src="./instagram.svg" alt="Instagram">
        </a>
      </div>
      <div id="viber-image" style="display:none; margin-top:10px;">
    <img src="РЕМОНТ.png" alt="Viber Image" style="max-width:100%;">
  </div>
    </section>
  </div>
  <script>
  const carousel = document.getElementById('carousel');
  const slides = carousel.querySelectorAll('img');
  let currentIndex = 0;

  function moveSlide(direction) {
    currentIndex += direction;
    if (currentIndex < 0) currentIndex = slides.length - 1;
    if (currentIndex >= slides.length) currentIndex = 0;
    // тут backticks, щоб ${currentIndex * 100}% підставилося
    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
  }
</script>

  <script>
  const modal = document.getElementById("orderModal");
  const orderButtons = document.querySelectorAll(".order-btn");

  orderButtons.forEach(btn => {
    btn.addEventListener("click", function (e) {
      // якщо елемент всередині <form> — не чіпаємо (даємо формі відправитись)
      if (this.closest('form')) return;

      // "ПРАЙС" веде по якірю — не відкриваємо модалку
      if (this.classList.contains("price-btn")) return;

      // відкриваємо модалку тільки для кнопок "ЗАМОВИТИ"
      if (this.textContent.trim().toUpperCase() === "ЗАМОВИТИ") {
        e.preventDefault();
        modal.style.display = "flex";
      }
    });
  });

  function closeModal(){ modal.style.display = "none"; }
  
  // Track if mouse was pressed on form
  let mouseDownOnForm = false;
  
  // Mouse down anywhere - track if it was on form
  document.addEventListener('mousedown', function(ev) {
    mouseDownOnForm = ev.target.closest('.modal-content') !== null;
  });
  
  // Click outside modal - only close if mouse wasn't pressed on form
  window.addEventListener('click', function(ev) {
    if (ev.target === modal && !mouseDownOnForm) {
      closeModal();
    }
  });
</script>


  <script>
  // Щоб браузер не стрибав по якорю сам
  if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
  }

  // якщо в URL є #hash (наприклад, #contacts) — прибираємо його
  const hadHash = !!location.hash;
  if (hadHash) {
    history.replaceState(null, '', location.pathname + location.search);
  }

  // Збереження позиції скролу (працює і на моб. Safari)
  const saveScroll = () => localStorage.setItem('scrollY', String(window.scrollY));
  window.addEventListener('beforeunload', saveScroll);
  window.addEventListener('pagehide', saveScroll);
  document.addEventListener('visibilitychange', () => { if (document.visibilityState === 'hidden') saveScroll(); });

  // Відновлення після завантаження ВСІХ ресурсів
  window.addEventListener('load', () => {
    const y = parseInt(localStorage.getItem('scrollY') || '0', 10);
    // Трошки відкласти, щоб лейаути від картинок устаканились
    setTimeout(() => { window.scrollTo(0, isNaN(y) ? 0 : y); }, 50);
  });
</script>

<div id="sent-toast" style="display:none; position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:#000; color:#fff; padding:12px 16px; border-radius:10px; z-index:9999;">
  Дякуємо! Ми отримали вашу заявку.
</div>

<script>
  if (location.hash === '#sent') {
    const t = document.getElementById('sent-toast');
    if (t) {
      t.style.display = 'block';
      setTimeout(() => t.style.display = 'none', 4000);
      history.replaceState(null, '', location.pathname + location.search);
    }
  }

</script>

<script>
// File upload handling and form submission
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('orderForm');
  const fileInput = document.getElementById('attachments');
  const fileList = document.getElementById('fileList');
  const fileError = document.getElementById('fileError');
  const submitBtn = document.getElementById('submitBtn');
  const btnText = document.querySelector('.btn-text');
  const spinner = document.getElementById('spinner');

  let selectedFiles = [];

  // File input change handler
  fileInput.addEventListener('change', function(e) {
    const files = Array.from(e.target.files);
    fileError.style.display = 'none';
    
    // Validate file count
    if (files.length > 5) {
      fileError.textContent = 'Максимальна кількість файлів: 5';
      fileError.style.display = 'block';
      fileInput.value = '';
      return;
    }

    // Validate file sizes
    const maxSize = 25 * 1024 * 1024; // 25MB in bytes
    const oversizedFiles = files.filter(file => file.size > maxSize);
    
    if (oversizedFiles.length > 0) {
      fileError.textContent = `Файл "${oversizedFiles[0].name}" перевищує ліміт 25MB`;
      fileError.style.display = 'block';
      fileInput.value = '';
      return;
    }

    selectedFiles = files;
    displayFiles();
  });

  // Display selected files
  function displayFiles() {
    fileList.innerHTML = '';
    
    selectedFiles.forEach((file, index) => {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      
      const fileName = document.createElement('div');
      fileName.className = 'file-name';
      fileName.textContent = file.name;
      
      const fileSize = document.createElement('div');
      fileSize.className = 'file-size';
      fileSize.textContent = formatFileSize(file.size);
      
      const removeBtn = document.createElement('button');
      removeBtn.className = 'remove-file';
      removeBtn.textContent = '×';
      removeBtn.onclick = () => removeFile(index);
      
      fileItem.appendChild(fileName);
      fileItem.appendChild(fileSize);
      fileItem.appendChild(removeBtn);
      fileList.appendChild(fileItem);
    });
  }

  // Remove file from selection
  function removeFile(index) {
    selectedFiles.splice(index, 1);
    displayFiles();
    
    // Update the file input value
    const dt = new DataTransfer();
    selectedFiles.forEach(file => dt.items.add(file));
    fileInput.files = dt.files;
  }

  // Format file size
  function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  document.getElementById('viber-btn').addEventListener('click', function(e) {
  e.preventDefault(); // щоб посилання ніде не переходило
  const imgContainer = document.getElementById('viber-image');
  // Перемикаємо видимість
  imgContainer.style.display = imgContainer.style.display === 'none' ? 'block' : 'none';
});

  // Form submission
  form.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Show loading state
    submitBtn.classList.add('loading');
    submitBtn.disabled = true;
    submitBtn.setAttribute('title', ' ');
    spinner.style.display = 'block';
    btnText.style.display = 'none';
    
    try {
      const formData = new FormData();
      
      // Add form fields
      formData.append('contact_mail', form.elements.contact_mail.value);
      formData.append('contact_phone', form.elements.contact_phone.value);
      formData.append('message', form.elements.message.value);
      //formData.append('test', true);
      
      // Add files
      if (selectedFiles.length > 0) {
        selectedFiles.forEach(file => {
          formData.append('attachments', file);
        });
      } else {
        formData.append('attachments', '');
      }

      // Send request
      const response = await fetch('https://maksystems.org/drukpidtyskom-api/new-order', {
        method: 'POST',
        body: formData
      });

      if (response.ok) {
        // Success
        showSuccessMessage();
        form.reset();
        selectedFiles = [];
        displayFiles();
        closeModal();
      } else {
        // Error
        const errorData = await response.json().catch(() => ({}));
        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
      }
      
    } catch (error) {
      console.error('Form submission error:', error);
      alert('Помилка при відправці форми. Спробуйте ще раз.');
    } finally {
      // Hide loading state
      submitBtn.classList.remove('loading');
      submitBtn.disabled = false;
      submitBtn.setAttribute('title', 'Відправити заявку');
      spinner.style.display = 'none';
      btnText.style.display = 'block';
    }
  });

  // Show success message
  function showSuccessMessage() {
    const toast = document.getElementById('sent-toast');
    if (toast) {
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 4000);
    }
  }
});
</script>
</body>
</html>
